<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –ú–∞—à–∏ ‚ù§Ô∏è</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #ffebee;
            font-family: 'Arial', sans-serif;
            color: #d32f2f;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
            position: relative;
        }

        #container {
            position: relative;
            z-index: 2;
            max-width: 90%;
            padding: 20px;
        }

        .message {
            font-size: 26px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
            white-space: pre-wrap;
            line-height: 1.6;
        }

        .message.visible {
            opacity: 1;
        }

        .hidden {
            display: none;
        }

        /* –ß–∞—Å—Ç–∏—Ü—ã */
        .particle {
            position: absolute;
            width: 30px;
            height: 30px;
            background-size: contain;
            background-repeat: no-repeat;
            animation: fall linear infinite;
            pointer-events: none;
            z-index: 1;
        }

        @keyframes fall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 0; }
            10% { opacity: 0.8; }
            100% { transform: translateY(120vh) rotate(360deg); opacity: 0; }
        }

        /* –ö–Ω–æ–ø–∫–∏ —á–∏—Å–µ–ª */
        .number-buttons {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 30px;
        }

        .number-button {
            padding: 18px 35px;
            font-size: 32px;
            background-color: #f48fb1;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .number-button.wrong {
            background-color: #ff5252;
            transform: scale(1.2);
        }

        /* –ò–≥—Ä–∞ —Å–æ —Å–ª–æ–≤–æ–º */
        .letter-options {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin: 30px 0;
        }

        .letter {
            width: 70px;
            height: 70px;
            background-color: #f48fb1;
            color: white;
            font-size: 36px;
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 15px;
            cursor: grab;
            user-select: none;
        }

        .word-slots {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }

        .slot {
            width: 70px;
            height: 70px;
            border: 4px dashed #d32f2f;
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 36px;
            color: #d32f2f;
        }

        .slot.filled {
            border-style: solid;
            background-color: #fff0f5;
        }

        #final-heart {
            font-size: 220px;
            opacity: 0;
            transition: opacity 3s ease-in-out;
        }

        #final-heart.visible {
            opacity: 1;
        }

        .feedback {
            font-size: 24px;
            min-height: 60px;
            margin: 20px 0;
            opacity: 0;
            transition: opacity 1s;
        }

        .feedback.visible {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="intro-message" class="message visible">–≠—Ç–æ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Ç–µ–±—è, –ú–∞—à–∞ ‚ù§Ô∏è</div>

        <div id="tap-prompt" class="message hidden">–ù–∞–∂–º–∏ –≤ –ª—é–±—É—é —Ç–æ—á–∫—É —ç–∫—Ä–∞–Ω–∞, —Å–æ–ª–Ω—ã—à–∫–æ ‚ú®</div><div id="number-game" class="hidden">
            <div class="message visible">–£–≥–∞–¥–∞–π, –∫–∞–∫–æ–µ —á–∏—Å–ª–æ —Å–µ–≥–æ–¥–Ω—è —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ –¥–ª—è —Ç–µ–±—è? üíï</div>
            <div class="number-buttons">
                <button class="number-button" data-value="100">100</button>
                <button class="number-button" data-value="6">6</button>
                <button class="number-button" data-value="18">18</button>
                <button class="number-button" data-value="78">78</button>
            </div>
            <div id="number-feedback" class="feedback message"></div>
        </div>

        <div id="correct-number-message" class="message hidden">
            –î–∞, —Ç—ã –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–∞–≤–∞! ‚ù§Ô∏è<br>
            –ò–º–µ–Ω–Ω–æ —á–∏—Å–ª–æ 18 ‚Äî —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ —Å–µ–≥–æ–¥–Ω—è...<br>
            –ü–æ—Ç–æ–º—É —á—Ç–æ —Ç–µ–±–µ –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è 18 –ª–µ—Ç, –º–æ—è –≤–∑—Ä–æ—Å–ª–∞—è –¥–µ–≤–æ—á–∫–∞! ‚ú®
        </div>

        <div id="first-congrats" class="message hidden"></div>

        <div id="second-congrats" class="message hidden">
            –ú–∞—à–∞, —Å–ø–∞—Å–∏–±–æ —Ç–µ–±–µ –∑–∞ –≤—Å—ë, —Ç—ã –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–∞—è –¥–µ–≤–æ—á–∫–∞,<br>
            —è —Ç–µ–±—è –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ –ª—é–±–ª—é ‚ù§Ô∏è
        </div>

        <div id="word-game" class="hidden">
            <div class="message visible">–ê —Ç–µ–ø–µ—Ä—å —Å–æ–±–µ—Ä–∏ —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ –¥–ª—è –º–µ–Ω—è —Å–ª–æ–≤–æ –∏–∑ –±—É–∫–≤... üíå</div>
            <div class="letter-options" id="letters"></div>
            <div class="word-slots" id="slots"></div>
            <button id="check-word" class="number-button" style="margin-top: 30px; padding: 15px 40px; font-size: 28px;">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
            <div id="word-feedback" class="feedback message"></div>
        </div>

        <div id="correct-word-message" class="message hidden">
            –î–∞, —Ç—ã –ø—Ä–∞–≤–∞, –ú–∞—à–∞! ‚ù§Ô∏è<br>
            –≠—Ç–æ —Ç–≤–æ—ë –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–µ –∏–º—è...<br>
            –°–∞–º–æ–µ –ª—é–±–∏–º–æ–µ —Å–ª–æ–≤–æ –Ω–∞ —Å–≤–µ—Ç–µ –¥–ª—è –º–µ–Ω—è üíï
        </div>

        <div id="final-heart" class="hidden">‚ù§Ô∏è</div>
    </div>

    <script>
        // –°–µ—Ä–¥–µ—á–∫–∏ –≤—Å–µ–≥–¥–∞ –Ω–∞ —Ñ–æ–Ω–µ
        function createParticles(type, count) {
            for (let i = 0; i < count; i++) {
                const p = document.createElement('div');
                p.classList.add('particle');
                p.style.left = ${Math.random() * 100}vw;
                p.style.animationDuration = ${Math.random() * 8 + 8}s;
                p.style.animationDelay = ${Math.random() * 6}s;
                p.style.backgroundImage = type === 'flower'
                    ? 'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\'%3E%3Ccircle cx=\'50\' cy=\'50\' r=\'40\' fill=\'%23ff4081\'/%3E%3C/svg%3E")'
                    : 'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\'%3E%3Cpath d=\'M50 90 C20 60 0 30 50 10 C100 30 80 60 50 90\' fill=\'%23f44336\'/%3E%3C/svg%3E")';
                document.body.appendChild(p);
            }
        }

        createParticles('heart', 30);

        // –≠–ª–µ–º–µ–Ω—Ç—ã
        const intro = document.getElementById('intro-message');
        const tapPrompt = document.getElementById('tap-prompt');
        const numberGame = document.getElementById('number-game');
        const numberFeedback = document.getElementById('number-feedback');
        const correctNumber = document.getElementById('correct-number-message');
        const firstCongrats = document.getElementById('first-congrats');
        const secondCongrats = document.getElementById('second-congrats');
        const wordGame = document.getElementById('word-game');
        const wordFeedback = document.getElementById('word-feedback');
        const correctWord = document.getElementById('correct-word-message');
        const finalHeart = document.getElementById('final-heart');

        // 1. Intro ‚Üí Tap prompt
        setTimeout(() => {
            // === –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –°–¢–ê–†–¢ ===
        setTimeout(() => {
            intro.classList.remove('visible'); // –ù–∞—á–∏–Ω–∞–µ–º –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ
            setTimeout(() => {
                intro.classList.add('hidden'); // –ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫—Ä—ã–≤–∞–µ–º intro
                tapPrompt.classList.remove('hidden');
                tapPrompt.classList.add('visible');
                document.body.addEventListener('click', startNumberGame, { once: true });
            }, 1500); // –ñ–¥—ë–º –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
        }, 5000); // 5 —Å–µ–∫—É–Ω–¥ –ø–æ–∫–∞–∑–∞ intro
        function startNumberGame() {tapPrompt.classList.remove('visible');
            setTimeout(() => {
                tapPrompt.classList.add('hidden');
                numberGame.classList.remove('hidden');
            }, 1500);
        }

        // 2. –ò–≥—Ä–∞ —Å —á–∏—Å–ª–∞–º–∏
        document.querySelectorAll('.number-button').forEach(btn => {
            btn.addEventListener('click', () => {
                if (btn.dataset.value === '18') {
                    numberGame.classList.add('hidden');
                    correctNumber.classList.remove('hidden');
                    correctNumber.classList.add('visible');
                    setTimeout(showFirstCongrats, 5000);
                } else {
                    btn.classList.add('wrong');
                    numberFeedback.textContent = '–ù–µ-–∞, –ø–æ–¥—É–º–∞–π –µ—â—ë, –º–æ—è —Ö–æ—Ä–æ—à–∞—è üòò';
                    numberFeedback.classList.add('visible');
                    setTimeout(() => {
                        btn.classList.remove('wrong');
                        numberFeedback.classList.remove('visible');
                        numberFeedback.textContent = '';
                    }, 2500);
                }
            });
        });

        // 3. –ü–µ—Ä–≤–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ —Å–ª–æ–≤–∞–º + —Ü–≤–µ—Ç–æ—á–∫–∏
        function showFirstCongrats() {
            correctNumber.classList.remove('visible');
            setTimeout(() => {
                correctNumber.classList.add('hidden');
                const text = "–ú–∞—à–∞, –ø–æ–∑–¥—Ä–∞–≤–ª—è—é —Ç–µ–±—è —Å –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è!\n–≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω—ã–π –¥–µ–Ω—å –¥–ª—è —Ç–µ–±—è –∏ –¥–ª—è —Ç–≤–æ–∏—Ö —Ä–æ–¥–Ω—ã—Ö.\n–¢–µ–±–µ –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–µ–≥–æ–¥–Ω—è 18 –ª–µ—Ç)\n–¢—ã —É–∂–µ –æ—á–µ–Ω—å –≤–∑—Ä–æ—Å–ª–∞—è –¥–µ–≤–æ—á–∫–∞ –∏ —Ç–µ–ø–µ—Ä—å —Å–∞–º–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—à—å –∫–∞–∂–¥–æ–µ —Å–≤–æ—ë —Ä–µ—à–µ–Ω–∏–µ ‚ù§Ô∏è\nP.S. –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞ ‚Äî –≤ –ø–∏—Å—å–º–µ)";
                firstCongrats.classList.remove('hidden');
                firstCongrats.classList.add('visible');
                firstCongrats.innerHTML = '';

                const lines = text.split('\n');
                let i = 0;
                const interval = setInterval(() => {
                    if (i < lines.length) {
                        firstCongrats.innerHTML += lines[i] + '<br>';
                        i++;
                    } else {
                        clearInterval(interval);
                        createParticles('flower', 40);
                        setTimeout(() => {
                            firstCongrats.classList.remove('visible');
                            setTimeout(showSecondCongrats, 1500);
                        }, 15000);
                    }
                }, 800);
            }, 1500);
        }

        // 4. –í—Ç–æ—Ä–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ
        function showSecondCongrats() {
            firstCongrats.classList.add('hidden');
            secondCongrats.classList.remove('hidden');
            secondCongrats.classList.add('visible');
            setTimeout(() => {
                secondCongrats.classList.remove('visible');
                setTimeout(() => {
                    secondCongrats.classList.add('hidden');
                    wordGame.classList.remove('hidden');
                }, 1500);
            }, 15000);
        }

        // 5. –ò–≥—Ä–∞ —Å–æ —Å–ª–æ–≤–æ–º
        const lettersDiv = document.getElementById('letters');
        const slotsDiv = document.getElementById('slots');
        const slots = [];

        for (let i = 0; i < 4; i++) {
            const slot = document.createElement('div');
            slot.classList.add('slot');
            slotsDiv.appendChild(slot);
            slots.push(slot);
        }

        const letters = ['–®', '–¶', '–†', '–ê', '–ó', '–ú', '–Ø'];
        letters.forEach(l => {
            const el = document.createElement('div');
            el.classList.add('letter');
            el.textContent = l;
            el.draggable = true;
            lettersDiv.appendChild(el);

            el.addEventListener('dragstart', e => e.dataTransfer.setData('text', l));
        });

        slots.forEach(slot => {
            slot.addEventListener('dragover', e => e.preventDefault());
            slot.addEventListener('drop', e => {
                e.preventDefault();
                const letter = e.dataTransfer.getData('text');
                if (!slot.textContent) {
                    slot.textContent = letter;
                    slot.classList.add('filled');
                }
            });
        });

        document.getElementById('check-word').onclick = () => {
            const guessed = slots.map(s => s.textContent || '').join('');
            if (guessed === '–ú–ê–®–ê') {
                wordGame.classList.add('hidden');
                correctWord.classList.remove('hidden');
                correctWord.classList.add('visible');
                setTimeout(() => {
                    correctWord.classList.remove('visible');
                    setTimeout(() => {
                        finalHeart.classList.remove('hidden');
                        finalHeart.classList.add('visible');
                    }, 1500);
                }, 5000);
            } else {
                wordFeedback.textContent = '–ù–µ —Å–æ–≤—Å–µ–º, —Å–æ–ª–Ω—ã—à–∫–æ... –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑–æ–∫ üíï';
                wordFeedback.classList.add('visible');
                setTimeout(() => {
                    wordFeedback.classList.remove('visible');
                    wordFeedback.textContent = '';
                    slots.forEach(s => {
                        s.textContent = '';
                        s.classList.remove('filled');
                    });
                }, 3000);
            }
        };
    </script>
</body>
</html>

