<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Поздравительная Открытка</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #ffebee; /* Светлый розовый фон */
            font-family: 'Arial', sans-serif;
            color: #d32f2f; /* Красный цвет текста */
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
            position: relative;
        }

        #container {
            position: relative;
            z-index: 2;
            max-width: 80%;
        }

        .message {
            font-size: 24px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            white-space: pre-wrap;
        }

        .message.visible {
            opacity: 1;
        }

        .hidden {
            display: none;
        }

        /* Анимация для цветочков и сердечек */
        .particle {
            position: absolute;
            width: 20px;
            height: 20px;
            background-size: contain;
            opacity: 0.6;
            z-index: 1;
            pointer-events: none;
        }

        /* Кнопки для чисел */
        .number-buttons {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }

        .number-button {
            padding: 15px 30px;
            font-size: 28px;
            background-color: #f48fb1;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .number-button.wrong {
            background-color: red;
        }

        /* Для игры в слово */
        #word-game {
            margin-top: 20px;
        }

        .letter-options {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .letter {
            width: 50px;
            height: 50px;
            background-color: #f48fb1;
            color: white;
            font-size: 24px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 5px;
            cursor: grab;
            border-radius: 5px;
            user-select: none;
        }

        .word-slots {
            display: flex;
            justify-content: center;
        }

        .slot {
            width: 50px;
            height: 50px;
            border: 2px dashed #d32f2f;
            margin: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            color: #d32f2f;
            border-radius: 5px;
        }

        .filled {
            border: 2px solid #d32f2f;
            background-color: #ffebee;
        }

        /* Большое сердце в конце */
        #final-heart {
            font-size: 200px;
            color: red;
            opacity: 0;
            transition: opacity 2s ease-in-out;
        }

        #final-heart.visible {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="intro-message" class="message">Это поздравление для тебя, Маша)</div>
        <div id="tap-prompt" class="message hidden">нажми в любую точку экрана</div>
        <div id="number-game" class="hidden">
            <div class="message">Угадай правильное число</div>
            <div class="number-buttons">
                <button class="number-button" data-value="100">100</button>
                <button class="number-button" data-value="6">6</button>
                <button class="number-button" data-value="18">18</button>
                <button class="number-button" data-value="78">78</button>
            </div><div id="number-feedback" class="message" style="font-size: 20px; margin-top: 10px;"></div>
        </div>
        <div id="correct-number-message" class="message hidden">Да, ты абсолютно права, именно число 18 является верным выбором )</div>
        <div id="first-congrats" class="message hidden"></div>
        <div id="second-congrats" class="message hidden">Маша, спасибо тебе за всё, ты очень хорошая девочка, я тебя очень сильно люблю❤️</div>
        <div id="word-game" class="hidden">
            <div class="message">Угадай слово</div>
            <div class="letter-options" id="letters"></div>
            <div class="word-slots" id="slots"></div>
            <div id="word-feedback" class="message" style="font-size: 20px; margin-top: 10px;"></div>
        </div>
        <div id="correct-word-message" class="message hidden">Да, ты права Маша)</div>
        <div id="final-heart" class="hidden">❤️</div>
    </div>

    <script>
        // Функция для анимации частиц (цветочки или сердечки)
        function createParticles(type, count) {
            const container = document.body;
            for (let i = 0; i < count; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                particle.style.left = `${Math.random() * 100}vw`;
                particle.style.top = `${-20}px`; // Начать сверху
                particle.style.animation = `fall ${Math.random() * 5 + 5}s linear infinite`;
                particle.style.backgroundImage = type === 'flower' ? 'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\'%3E%3Ccircle cx=\'50\' cy=\'50\' r=\'40\' fill=\'pink\'/%3E%3C/svg%3E")' : 'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\'%3E%3Cpath d=\'M50 90 C20 60 0 30 50 10 C100 30 80 60 50 90\' fill=\'red\'/%3E%3C/svg%3E")';
                container.appendChild(particle);

                // Анимация падения
                const style = document.createElement('style');
                style.innerHTML = `@keyframes fall { 0% { transform: translateY(0) rotate(0deg); } 100% { transform: translateY(120vh) rotate(${Math.random() * 360}deg); } }`;
                document.head.appendChild(style);
            }
        }

        // Запустить сердечки сразу и на протяжении всего
        createParticles('heart', 20); // Сердечки всегда

        // Логика для последовательности
        const introMessage = document.getElementById('intro-message');
        const tapPrompt = document.getElementById('tap-prompt');
        const numberGame = document.getElementById('number-game');
        const correctNumberMessage = document.getElementById('correct-number-message');
        const firstCongrats = document.getElementById('first-congrats');
        const secondCongrats = document.getElementById('second-congrats');
        const wordGame = document.getElementById('word-game');
        const correctWordMessage = document.getElementById('correct-word-message');
        const finalHeart = document.getElementById('final-heart');

        // Показать intro на 5 секунд
        introMessage.classList.add('visible');
        setTimeout(() => {
            introMessage.classList.remove('visible');
            setTimeout(() => {
                tapPrompt.classList.add('visible');
                document.body.addEventListener('click', handleTap, { once: true });
            }, 1000);
        }, 5000);

        // Обработка тапа для запуска игры с числами
        function handleTap() {
            tapPrompt.classList.remove('visible');
            setTimeout(() => {
                numberGame.classList.remove('hidden');
            }, 1000);
        }

        // Логика для выбора числа
        const numberButtons = document.querySelectorAll('.number-button');
        const numberFeedback = document.getElementById('number-feedback');
        numberButtons.forEach(button => {
            button.addEventListener('click', () => {
                const value = button.dataset.value;if (value === '18') {
                    numberFeedback.textContent = '';
                    numberGame.classList.add('hidden');
                    correctNumberMessage.classList.add('visible');
                    setTimeout(() => {
                        correctNumberMessage.classList.remove('visible');
                        setTimeout(() => {
                            showFirstCongrats();
                        }, 1000);
                    }, 3000); // Показать сообщение на 3 секунды
                } else {
                    button.classList.add('wrong');
                    numberFeedback.textContent = 'нет, не верно )';
                    setTimeout(() => {
                        button.classList.remove('wrong');
                        numberFeedback.textContent = '';
                    }, 1000);
                }
            });
        });

        // Показать первое поздравление постепенно по словам
        function showFirstCongrats() {
            const text = "Маша, поздравляю тебя с днём рождения, это особенный день для тебя и для твоих родных, тебе исполняется сегодня 18 лет) ты очень взрослая уже девочка и теперь сама принимаешь каждое свое решение) P.S. остальные слова в письме).";
            const words = text.split(' ');
            firstCongrats.classList.remove('hidden');
            let index = 0;
            const interval = setInterval(() => {
                if (index < words.length) {
                    firstCongrats.textContent += words[index] + ' ';
                    index++;
                } else {
                    clearInterval(interval);
                    // Начать сыпать цветочки только здесь
                    createParticles('flower', 30);
                    setTimeout(() => {
                        firstCongrats.classList.remove('visible');
                        setTimeout(() => {
                            firstCongrats.classList.add('hidden');
                            showSecondCongrats();
                        }, 1000);
                    }, 15000); // 15 секунд
                }
            }, 200); // По слову каждые 200мс
            firstCongrats.classList.add('visible');
        }

        // Второе поздравление
        function showSecondCongrats() {
            secondCongrats.classList.add('visible');
            secondCongrats.classList.remove('hidden');
            setTimeout(() => {
                secondCongrats.classList.remove('visible');
                setTimeout(() => {
                    secondCongrats.classList.add('hidden');
                    startWordGame();
                }, 1000);
            }, 15000); // 15 секунд
        }

        // Игра в слово
        function startWordGame() {
            wordGame.classList.remove('hidden');
            const letters = ['Ш', 'Ц', 'Р', 'А', 'З', 'М', 'Я'];
            const targetWord = 'МАША';
            const lettersContainer = document.getElementById('letters');
            const slotsContainer = document.getElementById('slots');
            const wordFeedback = document.getElementById('word-feedback');

            // Создать слоты
            for (let i = 0; i < targetWord.length; i++) {
                const slot = document.createElement('div');
                slot.classList.add('slot');
                slotsContainer.appendChild(slot);
            }

            // Создать буквы
            letters.forEach(letter => {
                const letterElem = document.createElement('div');
                letterElem.classList.add('letter');
                letterElem.textContent = letter;
                letterElem.draggable = true;
                lettersContainer.appendChild(letterElem);

                letterElem.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text', letter);
                });
            });

            // Обработка дропа в слоты
            const slots = document.querySelectorAll('.slot');
            slots.forEach(slot => {
                slot.addEventListener('dragover', (e) => {e.preventDefault();
                });

                slot.addEventListener('drop', (e) => {
                    const letter = e.dataTransfer.getData('text');
                    if (!slot.textContent) { // Только если слот пуст
                        slot.textContent = letter;
                        slot.classList.add('filled');
                    }
                });
            });

            // Проверка слова
            const checkButton = document.createElement('button');
            checkButton.textContent = 'Проверить';
            checkButton.style.marginTop = '20px';
            checkButton.classList.add('number-button');
            wordGame.appendChild(checkButton);

            checkButton.addEventListener('click', () => {
                let guessedWord = '';
                slots.forEach(slot => {
                    guessedWord += slot.textContent || '';
                });
                if (guessedWord === targetWord) {
                    wordFeedback.textContent = '';
                    wordGame.classList.add('hidden');
                    correctWordMessage.classList.add('visible');
                    setTimeout(() => {
                        correctWordMessage.classList.remove('visible');
                        setTimeout(() => {
                            finalHeart.classList.remove('hidden');
                            finalHeart.classList.add('visible');
                        }, 1000);
                    }, 3000); // 3 секунды на сообщение
                } else {
                    wordFeedback.textContent = 'Нет, не верно. Попробуй снова!';
                    // Сброс слотов через 1 секунду
                    setTimeout(() => {
                        slots.forEach(slot => {
                            slot.textContent = '';
                            slot.classList.remove('filled');
                        });
                        wordFeedback.textContent = '';
                    }, 1000);
                }
            });
        }
    </script>
</body>
</html>

